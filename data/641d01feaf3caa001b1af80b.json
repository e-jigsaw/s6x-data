{"id":"641d01feaf3caa001b1af80b","title":"再 M.2 SSD 増やしたら LAN が光らなくなる","image":null,"created":1679622655,"updated":1679622659,"lines":[{"id":"641d01feaf3caa001b1af80b","text":"再 M.2 SSD 増やしたら LAN が光らなくなる","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0655","text":"from [20230323] #0323","created":1679622655,"updated":1679622659},{"id":"641d01fe4ade4d00006c0656","text":"再 [M.2 SSD] 増やしたら LAN が光らなくなる","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0657","text":"\t[M.2 SSD 増設したら LAN ポートが光らなくなった]","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0658","text":"\t前回は1枚SSDを認識してなかったやつを取り除いたら動くようになった","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0659","text":"\tサポートに問い合わせたら初期不良っぽいので回収します、とのことだったので追加で M.2 SSD を買った","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c065a","text":"\t今回は慎重を期して、[UEFI] でも [SSD] を認識しているのを確認した","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c065b","text":"\tこれで安泰ですわいと OS 起動したらまたしても LAN が光らなくなっている....","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c065c","text":"\t\tメーカー混載状態になったので、なんかそういう相性問題とかあんのか？？？とスロットに1枚ずつ挿して動作確認することに","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c065d","text":"\t\t2枚でこのメーカーの順だとうまくいくなー、みたいなシチュになってしまった","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c065e","text":"\t\tまた OS 起動の様子をみているとブート中は LAN がピカピカしていて、ログインシェルがでてくるあたりでスン....てなっちゃってることに気付いた","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c065f","text":"\t\tてーことはなんかソフト的な不具合なのかなー？とおもい [NIC] らへんのコマンドを調べて実行していった","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0660","text":"\t`ip a` でインターフェースの一覧が出せる","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0661","text":"\t\t成功している時はステータスが UP になっていることを確認した","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0662","text":"\t\t\tまた、`enp2s0` てやつが物理で `vmbr0` が仮想？","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0663","text":"\t\tで、うまくいってないパターンの時をみてみると、`ip a` で `enp2s0` だったところが `enp3s0` になっていることに気付いた","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0664","text":"\t\t\tなんかおぼろげな記憶では、物理のポートって `eth0` のイメージだったんだけど、なにやらカブらないように？動的に変更するような仕組みになっているらしい","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0665","text":"\t\t\tこれを `eth0` に固定する方向で考えてたんだけど、なんか面倒そうだった","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0666","text":"\t\t`/etc/network/interfaces` をみると `auto enp2s0` で `vmbr0` の `bridge-ports enp2s0` になっていて、なんでここで不整合が起きてんだろう？ということに","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0667","text":"\t\t\t書かれている [Proxmox] のコメントによれば、マニュアルでイジるな、と力強く書かれてるんだが、ものは試しってことで `enp2s0` になってる部分を `enp3s0` に書き換えて再起動してみることに","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0668","text":"\t\t\tなんかこれでうまくいったので、SSD を1枚ずつ増やしていったけど SSD 全挿し状態でもうまく動くようになった","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c0669","text":"\t\t\t\tやったぜ..................","created":1679622655,"updated":1679622655},{"id":"641d01fe4ade4d00006c066a","text":"","created":1679622655,"updated":1679622655}]}