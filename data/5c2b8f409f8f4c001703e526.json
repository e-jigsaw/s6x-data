{"id":"5c2b8f409f8f4c001703e526","title":"Windows8アプリの共有チャームのつくりかた - blog.jgs.me","image":"https://gyazo.com/8aa82d6a989edc95b45f8610a02e8da5/raw","created":1356489420,"updated":1577352522,"lines":[{"id":"5c2b92ac4ade4d000054659f","text":"Windows8アプリの共有チャームのつくりかた - blog.jgs.me","created":1356489420,"updated":1546359863},{"id":"5c2b92ac4ade4d00005465a0","text":"[https://gyazo.com/8aa82d6a989edc95b45f8610a02e8da5]","created":1356489420,"updated":1577352488},{"id":"5c2b92ac4ade4d00005465a1","text":"[Windows8]/[Windows8 Store App]で[共有チャーム]を実装しようとしたら、意外と苦労したので書き残しておきます。","created":1356489420,"updated":1556772139},{"id":"5c2b92ac4ade4d00005465a2","text":"[http://msdn.microsoft.com/ja-jp/library/windows/apps/hh465261.aspx クイックスタート: コンテンツの共有 (JavaScript と HTML を使った Windows ストア アプリ) (Windows)]","created":1356489420,"updated":1356489420},{"id":"5c2b92ac4ade4d00005465a3","text":"にもありますが、まずは `Windows.ApplicationModel.DataTransfer.DataTransferManager.getForCurrentView()` にEventlistenerをaddするところからです。場合にもよりますが、だいたいは `WinJS.Application.onactivate()` の中でいいとおもいます。このとき、忘れてはいけないのがEventlistenerをremoveする部分を書き忘れないことです。これも、だいたいは `WinJS.Application.oncheckpoint()` の中でいいとおもいます。removeしないと、一度は共有チャームが発動できてもsuspendなどした後は使えなくなります。removeしてなかったことに気付かなくて何時間か無駄にしました。","created":1356489420,"updated":1556772195},{"id":"5c2b92ac4ade4d00005465a4","text":"これで共有チャームが押されたことをキャッチできるようになるので、次にどのデータを共有するかを書きます。ハンドラの引数がrequestというメソッドを持っているので、これにデータを投入します。`request.data.properties.title` には、共有チャームに出てくる画面のタイトルが指定できます。また、`request.data.properties.description` には同じく、その説明を指定できます。","created":1356489420,"updated":1556772209},{"id":"5c2b92ac4ade4d00005465a5","text":"[https://gyazo.com/153cff1288462be3253a28d97ec8d812]","created":1356489420,"updated":1577352499},{"id":"5c2b92ac4ade4d00005465a6","text":"その後は、共有するデータを request に指定します。`request.data.setText(text)` のような感じです。画像を指定するときは、画像のファイルを指定しなくてはいけないので `request.data.setBitmap(image)` を使います。このとき、引数には `Windows.Storage.Streams.RandomAccessStreamReference` を使わないといけない上に、URLから画像を参照するときは、`Windows.Storage.Streams.RandomAccessStreamReference.createFromUri()` を使うのですが、この引数もURI型の引数を指定しないと型が違うよ、とエラーが出ます。StringをURIにキャストするには、`Windows.Foundation.Uri()` を使います。同様に、URLを共有するときは、`request.data.setUri()` をってURI型の引数を与えてやると共有が可能なアプリ一覧が表示されて共有することができるようになります。","created":1356489420,"updated":1556772246},{"id":"5cca75994ade4d000061386e","text":"","created":1556772250,"updated":1556772250},{"id":"5c2b92ac4ade4d00005465a7","text":"[****** まとめ]","created":1356489420,"updated":1356489420},{"id":"5c2b92ac4ade4d00005465a9","text":"とりあえずメソッド名とか長い。あと、型ある振る舞いするのに、実行時じゃないと型が違うことがわからないの、型の意味なさすぎる。","created":1356489420,"updated":1356489420},{"id":"5c2b92ac4ade4d00005465aa","text":"共有チャームの使い方で苦戦した甲斐あって、[Reblog Monster]次期リリースは共有ができるようになります。","created":1356489420,"updated":1556772259},{"id":"5cca759d4ade4d000061386f","text":"","created":1556772254,"updated":1556772254},{"id":"5c2b92ac4ade4d00005465ab","text":"December 26th, 2012 11:37am","created":1356489420,"updated":1356489420},{"id":"5c2b92ac4ade4d00005465ac","text":"[* original: http://blog.jgs.me/post/38830709200]","created":1356489420,"updated":1356489420},{"id":"5c2b92ac4ade4d00005465ad","text":"#20121226 #1226","created":1356489420,"updated":1556772272},{"id":"5cca75d34ade4d0000613872","text":"","created":1556772308,"updated":1556772308}]}