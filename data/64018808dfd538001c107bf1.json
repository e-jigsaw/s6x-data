{"id":"64018808dfd538001c107bf1","title":"20230303","image":null,"created":1677821965,"updated":1677843239,"lines":[{"id":"64018808dfd538001c107bf1","text":"20230303","created":1677821965,"updated":1677821965},{"id":"6401880c4ade4d00003c187e","text":"#0303","created":1677821965,"updated":1677821965},{"id":"6401880c4ade4d00003c187f","text":"","created":1677821965,"updated":1677821965},{"id":"6401c5be4ade4d00004a2c66","text":"[Picsur] ビルドめも","created":1677837759,"updated":1677837777},{"id":"6401c5c54ade4d00004a2c68","text":"\t結局 [Ubuntu] で yarn install トライしてみることに","created":1677837766,"updated":1677837785},{"id":"6401c5d84ade4d00004a2c69","text":"\tエラーでてえ〜ってなったけど、ログをみてみると [make] がない、[g++] がないとかで、こいつらをいれたら素直に install 通った","created":1677837785,"updated":1677837823},{"id":"6401c5ff4ade4d00004a2c6a","text":"\t\t[linux] は最高だぜ","created":1677837823,"updated":1677837831},{"id":"6401c5be4ade4d00004a2c67","text":"","created":1677837759,"updated":1677837759},{"id":"6401b8264ade4d00004db99c","text":"[tar]","created":1677834279,"updated":1677834280},{"id":"6401b8294ade4d00004db99e","text":"\t> tar -cvzf <filename> <dir>","created":1677834281,"updated":1677834301},{"id":"6401b83e4ade4d00004db99f","text":"\t> tar -xvzf <filename>","created":1677834302,"updated":1677834313},{"id":"6401b8264ade4d00004db99d","text":"","created":1677834279,"updated":1677834279},{"id":"64019c454ade4d0000009f3a","text":"[TrueNAS] で作成したストレージを [iSCSI] 経由でマウントする","created":1677827142,"updated":1677827184},{"id":"64019c714ade4d0000009f3c","text":"\t情報系の出だけど、こういう話には全く疎くて調べ調べでようやっと [Proxmox] 上の [Ubuntu] の VM でマウントできた","created":1677827185,"updated":1677827243},{"id":"64019caa4ade4d0000009f3d","text":"\tTrueNAS の Web GUI から Portals, Initiators Groups(これは一旦 Allow All Initiators), Targets, Extents, Associated Targets をそれぞれ適当に作成していく","created":1677827243,"updated":1677827330},{"id":"64019d024ade4d0000009f3e","text":"\tVM で `iscsiadm` を叩けばいいんだけど、`/var/run/iscsi` なんたらが root になってるのでいちいち sudo をつけないとパーミッションで弾かれる","created":1677827331,"updated":1677827438},{"id":"64019d704ade4d0000009f3f","text":"\t\t`-m discovery -t sendtargets -p <IP>` でディスカバリ","created":1677827440,"updated":1677827490},{"id":"64019da24ade4d0000009f40","text":"\t\t`-m node -L all` でログイン","created":1677827490,"updated":1677827513},{"id":"64019dba4ade4d0000009f41","text":"\t\t`-m session --op show` を叩いてから `sudo dmesg` で様子がわかる","created":1677827514,"updated":1677827567},{"id":"64019def4ade4d0000009f42","text":"\t`sudo fdisk -l /dev/<name>` で様子を確認してから fdisk でパーティションを作る","created":1677827567,"updated":1677827628},{"id":"64019e2c4ade4d0000009f43","text":"\t`sudo mkfs.ext4 /dev/<name>` でフォーマット","created":1677827628,"updated":1677827659},{"id":"64019e4b4ade4d0000009f44","text":"\t`sudo mount -t ext4 /dev/<name> /mnt/<target>` でマウントできる","created":1677827659,"updated":1677827694},{"id":"64019e6d4ade4d0000009f45","text":"\tマウントしたら `chown <user>:<user> /mnt/<target>` で権限を変えておくと以降 sudo 不要にできる","created":1677827694,"updated":1677827737},{"id":"64019ea34ade4d0000009f46","text":"\tこれで適当に当該ディレクトリに書き込んだりすると反映されるようになった","created":1677827748,"updated":1677827763},{"id":"64019f9d4ade4d0000009f47","text":"\tただ、[mac] からだと iSCSI でマウントできない(プロプラのソフトでやる気がありそうなのはあるっぽいが...)っぽくて [SMB] でいいんじゃねって気もしなくもない","created":1677827998,"updated":1677828061},{"id":"6401a0c74ade4d0000009f48","text":"\t[Windows] では iSCSI いけるようだが、今度は [ext4] で困るになりそう","created":1677828296,"updated":1677828318},{"id":"6401a0dd4ade4d0000009f49","text":"\t\t[WSL] で Ubuntu いれて、そこでマウントすればなんとかなったりするかな？","created":1677828318,"updated":1677828336},{"id":"6401d41b4ade4d00004a2c6b","text":"\t....といったとこまでやって、別のマシンでマウントしたらすげー勢いで IO error が発生した","created":1677841436,"updated":1677841457},{"id":"6401d4314ade4d00004a2c6c","text":"\t調べてみると論理ボリュームを作ってやらないといけないみたい","created":1677841457,"updated":1677841478},{"id":"6401d4484ade4d00004a2c6d","text":"\t\t`sudo umount /dev/<name>` でアンマウント","created":1677841480,"updated":1677841540},{"id":"6401d46e4ade4d00004a2c6e","text":"\t\t`sudo fdisk /dev/<name>` でパーティションを切り直す","created":1677841519,"updated":1677841548},{"id":"6401d48c4ade4d00004a2c6f","text":"\t\t`sudo pvcreate /dev/<name>` で物理ボリュームを作る","created":1677841548,"updated":1677841578},{"id":"6401d4aa4ade4d00004a2c70","text":"\t\t`sudo vgcreate <group_name> /dev/<name>` でボリュームグループ？を作る `vgdisplay` で確認","created":1677841578,"updated":1677841638},{"id":"6401d4c64ade4d00004a2c71","text":"\t\t`sudo lvcreate -l <n> -n <logic_name> <group_name>` で論理ボリューム？を作る","created":1677841606,"updated":1677841691},{"id":"6401d5264ade4d00004a2c72","text":"\t\tそうすると `/dev/<group_name>/<logic_name>` ができるので、`mkfs.ext4` でフォーマット","created":1677841702,"updated":1677841740},{"id":"6401d54b4ade4d00004a2c73","text":"\t........とおもったんだけど、そもそも iSCSI だとターゲットに対してイニシエータが対になってるから同時に複数のホストで接続しても先勝ちで接続されたホストの変更が優先されて、そいつがアンマウントしたら次のマウントした奴にその変更が反映される....的な感じみたい","created":1677841740,"updated":1677843202},{"id":"6401db074ade4d00004a2c74","text":"\t\t(何も調べずにやっていた人)","created":1677843208,"updated":1677843216},{"id":"6401db114ade4d00004a2c75","text":"\t結論: SMB でよさそう","created":1677843218,"updated":1677843239},{"id":"64019c464ade4d0000009f3b","text":"","created":1677827142,"updated":1677827142},{"id":"6401880d4ade4d00003c1880","text":"[VSCode] は remote ssh で接続した方がラク","created":1677821966,"updated":1677822185},{"id":"640188234ade4d00003c1882","text":"\tここしばらくで [Ubuntu] のインストールの画面一体何度見たんだってぐらいやってるんだけど、Ubuntu のインストーラーの最後らへんに [OpenSSH] をいれますかって聞いてきて、インストールするを選択すると [GitHub] か [Launchpad] から公開鍵を読んでこれるよってなってたので、試しに GitHub のアカウントを指定したら、普段使ってるマシンの公開鍵が `.ssh` の中に入った状態で起動した","created":1677821988,"updated":1677822111},{"id":"6401889e4ade4d00003c1883","text":"\tそしたら [VSCode] に Remote -SSH をいれて、ssh の config を足してやると ssh で接続しに行ってサーバ側の VSCode のセットアップが勝手にされて使えるようになった","created":1677822111,"updated":1677822174},{"id":"640188dd4ade4d00003c1884","text":"\tトンネルなんか経由せずに最初からこれでよかった感","created":1677822174,"updated":1677822200},{"id":"6401890d4ade4d00003c1885","text":"\t\tVSCode つながっちゃえば別に [Proxmox] の管理画面で [xterm.js] 使う必要もないわけだし...","created":1677822221,"updated":1677822370},{"id":"6401880d4ade4d00003c1881","text":"","created":1677821966,"updated":1677821966}]}