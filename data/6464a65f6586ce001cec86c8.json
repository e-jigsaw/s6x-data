{"id":"6464a65f6586ce001cec86c8","title":"Tailscale ごしにアクセスした時にドメインを解決したい","image":null,"created":1684317791,"updated":1684317799,"lines":[{"id":"6464a65f6586ce001cec86c8","text":"Tailscale ごしにアクセスした時にドメインを解決したい","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a7e","text":"from [20230516] #0516","created":1684317791,"updated":1684317799},{"id":"6464a65f4ade4d0000695a7f","text":"[Tailscale] ごしにアクセスした時にドメインを解決したい","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a80","text":"\t前回までのあらすじ","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a81","text":"\t\tTailscale を [OpenWRT] のルータにいれて、`tailscale up` に `--advertize-routes` をつけると、Tailscale ごしにアクセスしてる端末からでも LAN の IP で接続できるようになった","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a82","text":"\t\t家内サーバたちの IP をいちいちおぼえてらんないので、ルータの [dnsmasq] でドメインの解決をしていた","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a83","text":"\t\tTailscale の DNS にルータの IP を設定したが、ドメインを解決してくれなかった","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a84","text":"\t外出る機会が増えてきて、やっぱ不便だなあ、と痛感したので取り組みを再開することに","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a85","text":"\t調べてみると、[MagicDNS] とセットで [SplitDNS] てのがあるらしい","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a86","text":"\t\t特定のドメインを特定の IP で解決して、それ以外は upstream に流す...というようなことができるらしい","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a87","text":"\t\tんで、ここにまたルータの IP を設定したらうまくいかないかな〜...とおもったんだけど、やっぱり無理だったので大人しく [Pi-hole] に Local DNS Records を設定して、Tailscale の SplitDNS に Pi-hole の IP を設定すると解決できた","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a88","text":"\t二重管理しても仕方ないし、DNS まわりの設定は Pi-hole にもっていこうかな〜....","created":1684317791,"updated":1684317791},{"id":"6464a65f4ade4d0000695a89","text":"","created":1684317791,"updated":1684317791}]}