{"id":"5c2b8f409f8f4c001703e516","title":"最近のクラウドのはなし - blog.jgs.me","image":"https://gyazo.com/e66044944f26d3a493864898113f269d/raw","created":1341119460,"updated":1576324898,"lines":[{"id":"5c2b92ac4ade4d00005463ed","text":"最近のクラウドのはなし - blog.jgs.me","created":1341119460,"updated":1546359794},{"id":"5c2b92ac4ade4d00005463ee","text":"[https://gyazo.com/e66044944f26d3a493864898113f269d]","created":1341119460,"updated":1576324865},{"id":"5c2b92ac4ade4d00005463ef","text":"[Dotcloud]の[legacy application]化でいろいろ詰んだはなしと、最近[クラウド]こわくね？ってはなしです。","created":1341119460,"updated":1548662371},{"id":"5c2b92ac4ade4d00005463f0","text":"まずはDotcloud。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f1","text":"Dotcloudさんとは、[Duostack]を使っていたらDotcloudに買収されてDuostackよりも使いやすいな〜ってなったのが出会いでした。作ったアプリケーションを音速で公開できてすごく楽しくてずっと使わせてもらっていました。","created":1341119460,"updated":1548662379},{"id":"5c2b92ac4ade4d00005463f2","text":"僕の娘( [http://twitter.com/ykybot @ykybot] )もDotcloud上に生きています。いや、生きていました。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f3","text":"Dotcloudさんは、着実にバージョンアップをしていて、みんながより使いやすいようにいろいろ改良し続けていて、それは大変素晴らしいのですが、その度に所作が変わってそれに振り回されつつも、その都度調べて対応していました。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f4","text":"少し前も、[CLI]のアップデート諸々で詰みかけたのですが、なんやかんやしたらちゃんと動くようになったので、また動かなくなってもなんとかなるだろう、と思っていたのですが。","created":1341119460,"updated":1548662392},{"id":"5c2b92ac4ade4d00005463f5","text":"現状どうしようもなくなったので、やったことをメモがてらに書いておきます。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f6","text":"[* 症状: たぶんnodeの動いてるprocessが死んでる] (今までもたまに死んでたので都度対応してた)","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f7","text":"[* 解決策: 落ち着いて「 $ dotcloud restart appname.service 」それでもだめならpushしなおす]","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f8","text":"「$ dotcloud restart appname.service」して、「$ dotcloud info appname.service」するとstateがrunningになるんだけど、いざ処理させようとすると死ぬ。(stateがstoppedに戻る)","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463f9","text":"pushしなおすと「All services have been initialized. Deploying code…」のところでTimed outしてdeployできない。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463fa","text":"そこで、sshではいってcurrent下でnodeを起動するとちゃんと動く(ただし権限が足りないところは動かない)","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463fb","text":"いろいろ調べてみると、dotcloudの体系が [http://docs.dotcloud.com/guides/flavors/#legacy 変更] になって","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463fc","text":"\tSandbox(スケールしない代わりに無料)","created":1341119460,"updated":1548662432},{"id":"5c4eb69a4ade4d000099fd93","text":"\tlive(スケールするしサポートするし独自ドメイン使えるしハッピーだけど有料)","created":1548662427,"updated":1548662428},{"id":"5c2b92ac4ade4d00005463fd","text":"\tlegacy(昔からのやつ)","created":1341119460,"updated":1548662436},{"id":"5c2b92ac4ade4d00005463fe","text":"になったようで、「$ dotcloud list」するとバッチリlegacyになっている。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d00005463ff","text":"「$ dotcloud info appname」するとサポートに連絡してね！ってメッセージ出る。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546400","text":"仕方ないので一旦諦めて「$ dotcloud create -f sandbox appname」してsandboxで新規アプリケーションをつくる。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546401","text":"ところが、相変わらず「All services have been initialized. Deploying code…」の部分でコケるので、デプロイログを監視しながら[デプロイ]するも、何も[ログ]を吐かずにコケる。","created":1341119460,"updated":1548662451},{"id":"5c2b92ac4ade4d0000546402","text":"[* 結論: Dotcloudは一旦棄てよう]","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546403","text":"そういうわけで、ささっと[Heroku]に移行しました。細々したところを修正しただけでサクッと動くようになってHerokuさんマジHerokuさんでした。","created":1341119460,"updated":1548662454},{"id":"5c2b92ac4ade4d0000546404","text":"deployできないってことは、たぶんこちらのコードが悪いのか設定が悪いのかだとは思うのだけれど、どこがダメなのかわからないのでどうしようもない感じです。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546405","text":"とりあえずサポートにメール打つしかないのかなあ…","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546406","text":"なぜか[DB]は生きているので、DBがDotcloud、プログラムがHerokuにあるっていう非常に気持ち悪い状態なので解消したいな、とおもいます。そこそこ容量のある[Mongo]のホスティングサービスは何があるのかなあ…","created":1341119460,"updated":1548662468},{"id":"5c2b92ac4ade4d0000546407","text":"それから、気持ち速度が遅くなった感じがします。やっぱりDBとの距離が開いたからだろうな、というのは容易に分かりますが…","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546408","text":"もろもろ解決方法わかるひと、教えてください。","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546409","text":"こっからは雑談なのですが、例のなんとかサーバの件もあって改めて僕らは[IT小作人]なんだなあ、と感じさせられました。","created":1341119460,"updated":1548662485},{"id":"5c2b92ac4ade4d000054640a","text":"領主の鶴の一声であたふた振り回されるし、領主が「間違えちゃたテヘペロ☆彡」って小作地で[原爆]炸裂させても小作人は何も言えないわけで。","created":1341119460,"updated":1548662525},{"id":"5c2b92ac4ade4d000054640b","text":"つい昨日か一昨日あたりも[AWS]が落ちた影響で[Instagram]がしばらくダウンしたりと、クラウドの弱さが目立つなあって気がしてます。","created":1341119460,"updated":1548662496},{"id":"5c2b92ac4ade4d000054640c","text":"そう考えると、自前で持っておくと最悪自前でなんとかできる([スキル]があればだけど)しやっぱそっちの方がつえーのかなあ、っておもいます。","created":1341119460,"updated":1548662521},{"id":"5c2b92ac4ade4d000054640d","text":"かといって、僕は[下のレイヤーの知識]は学校で勉強した程度にしか知らないし、なによりマシンもないのでクラウドホスティングサービスは非常にありがたい存在でもあります。","created":1341119460,"updated":1548662517},{"id":"5c2b92ac4ade4d000054640e","text":"単純なトレードオフの話っちゃあそれまでなんですけどね。","created":1341119460,"updated":1341119460},{"id":"5c4eb6e94ade4d000099fd94","text":"","created":1548662506,"updated":1548662506},{"id":"5c2b92ac4ade4d000054640f","text":"July 1st, 2012 2:11pm","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546410","text":"[* original: http://blog.jgs.me/post/26254978590]","created":1341119460,"updated":1341119460},{"id":"5c2b92ac4ade4d0000546411","text":"#20120701 #0701","created":1341119460,"updated":1576324877},{"id":"5c4eb7014ade4d000099fd96","text":"","created":1548662529,"updated":1548662529}]}