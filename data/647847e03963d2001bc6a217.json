{"id":"647847e03963d2001bc6a217","title":"prisma migrate dev をどうにか整合性を合わせる","image":null,"created":1685604321,"updated":1685604325,"lines":[{"id":"647847e03963d2001bc6a217","text":"prisma migrate dev をどうにか整合性を合わせる","created":1685604321,"updated":1685604321},{"id":"647847e04ade4d00008f5268","text":"from [20230531] #0531","created":1685604321,"updated":1685604325},{"id":"647847e04ade4d00008f5269","text":"prisma migrate dev をどうにか整合性を合わせる","created":1685604321,"updated":1685604321},{"id":"647847e04ade4d00008f526a","text":"\t[prisma] で migrate dev を実行してから、いやスキーマこっちの方がいいな....みたいになると適用し直したくなる","created":1685604321,"updated":1685604321},{"id":"647847e04ade4d00008f526b","text":"\t一旦 drop して整合性を合わせればいいや〜と適当に辻褄を合わせるものの、DB の側にマイグレーション情報が残っていて、ここの整合性がとれないのでリセットしま〜す！データは吹っ飛びま〜す！というなかなかハードランディングを強いられることになり、どうにか誤魔化せないかと試行錯誤した","created":1685604321,"updated":1685604321},{"id":"647847e04ade4d00008f526c","text":"\t結局実態としては `public._prisma_migrations` のテーブルにチェックサムと共にデータが格納されているので(ちゃんとしているなあ)、これを適用した migration と削除した migration をそれぞれ消してやると整合性がとれたことになった","created":1685604321,"updated":1685604321},{"id":"647847e04ade4d00008f526d","text":"\t\tよかった.......","created":1685604321,"updated":1685604321},{"id":"647847e04ade4d00008f526e","text":"","created":1685604321,"updated":1685604321}]}