{"id":"654d98b43bce0f001cf813a9","title":"pnpm deploy メモ","image":null,"created":1699584180,"updated":1699584185,"lines":[{"id":"654d98b43bce0f001cf813a9","text":"pnpm deploy メモ","created":1699584180,"updated":1699584180},{"id":"654d98b44ade4d000012ee02","text":"from [20231103] #1103","created":1699584180,"updated":1699584185},{"id":"654d98b44ade4d000012ee03","text":"[pnpm] deploy メモ","created":1699584180,"updated":1699584180},{"id":"654d98b44ade4d000012ee04","text":"\tpnpm に deploy てコマンドが生えてて、pnpm workspaces ベースの monorepo で、パッケージ内の依存を解決した状態で特定のディレクトリにコピーしてくれる","created":1699584180,"updated":1699584180},{"id":"654d98b44ade4d000012ee05","text":"\tただ、微妙に罠があって、ご丁寧に deploy コマンドは `.gitignore` ファイルの中身をみて、ignore されてるファイルはコピーしないという挙動になっていてハマった","created":1699584180,"updated":1699584180},{"id":"654d98b44ade4d000012ee06","text":"\tdocker image をビルドする時に `.dockerignore` で `.gitignore` を弾いておかないといけないんだけど、`.dockerignore` の挙動が `.gitignore` と違くて、`**/.gitignore` としないとサブディレクトリ内の `.gitignore` は弾いてくれないのであった","created":1699584180,"updated":1699584180},{"id":"654d98b44ade4d000012ee07","text":"","created":1699584180,"updated":1699584180}]}