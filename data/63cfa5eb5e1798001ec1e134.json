{"id":"63cfa5eb5e1798001ec1e134","title":"NanoPi R5S をルーターとして使う","image":null,"created":1674552811,"updated":1674552816,"lines":[{"id":"63cfa5eb5e1798001ec1e134","text":"NanoPi R5S をルーターとして使う","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f2","text":"from [20230121] #0121","created":1674552811,"updated":1674552816},{"id":"63cfa5eb4ade4d00001126f3","text":"[NanoPi R5S] をルーターとして使う","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f4","text":"\t今の家に引っ越してきてから謎にネットワークのトラブルが多くて、いろいろ試して彷徨っている","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f5","text":"\tいくつか市販の無線ルーターを試したんだけど、どれも一長一短でなんだかなあ....となっていたところに NanoPi というか、シングルボードルーターというジャンルがあることを知った","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f6","text":"\t\tいくつか調べてみたが、よくわからんかったので最初にみつけた NanoPi を買ってみることに","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f7","text":"\t\t[NanoPi R6S] てのが出てるんだが、[中国]は今[春節]ということで工場やら物流がいろいろお休み中らしい","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f8","text":"\t\tてわけで日本の [Amazon] で仕入れられる R5S にした","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126f9","text":"\t\t\t相変わらずすぐ届いて助かる","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126fa","text":"\t\thttps://www.friendlyelec.com/index.php?route=product/product&product_id=287","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126fb","text":"\t一応英語の Wiki があるので参照しながらセットアップしていく...","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126fc","text":"\t\thttps://wiki.friendlyelec.com/wiki/index.php/NanoPi_R5S","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126fd","text":"\t\t初回は `root@password` でコンソールに入れる","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126fe","text":"\t\tHDMI と USB キーボードを接続していろいろ動作確認してみた","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d00001126ff","text":"\t\tCLI で結構がんばらないといけないのかなとおもったけど、ブラウザのでアクセスすると GUI で設定できるのでさほど CLI と向き合わなくてよかった","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112700","text":"\t\t\thttps://openwrt.org/docs/guide-quick-start/walkthrough_login","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112701","text":"\t\t\tCLI ではパスワードを変更したのと、`/etc/config/network` の `option ipaddr` を変更したぐらいかなあ","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112702","text":"\t\t\tssh のポート変更は GUI からもできたし、他の ssh まわりの設定も GUI からやった","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112703","text":"\t\t[ds-lite] で接続したくて、パッケージをいれないといけなそうだったので、[PPPoE] で一旦接続して....とかだるいので、既存のルーターにつなげた状態でインターネットに接続して ds-lite のパッケージをインストールした","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112704","text":"\t\t\t一応他のパッケージのアップデートをしたり、時間を同期したり等","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112705","text":"\t\tそしたら既存のルーターを取り外して、ONU から R5S の WAN にケーブルを接続して、LAN1 に大元のスイッチを接続して、ルーターのアドレスにブラウザから接続すれば GUI が操作できるようになった","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112706","text":"\t\tこの状態でも v6 はつながっているらしい、ネットワーク無知なのでぼんやりとしかわかってないけど","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112707","text":"\t\t\t`DHCPv6クライアント` にしておけばいいっぽい","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112708","text":"\t\t\tv4 側を追加しておいた `Dual-Stack Lite (RFC6333)` に変更する","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112709","text":"\t\t\t\t[transix] なので AFTR は `2404:8e00::feed:100` らしい","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d000011270a","text":"\t\t\tこれで v4 もつながるようになった","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d000011270b","text":"\tこのままだと有線の端末しかつながってないので、無線のルーターもつなげたいというわけで","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d000011270c","text":"\t\tこれめっちゃ昔から深く考えないようにしてたんだけど、有線のネットワークのところに無線のルーター挿すと無線でつながってる端末から有線でつながってる端末にアクセスできなくない....???と謎に思い込んでた","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d000011270d","text":"\t\t\t...のだが、ルーターにはブリッジモードってのがあって、これに設定しておくとルーター機能なしでアクセスポイント？として動作するようになっているらしい","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d000011270e","text":"\t\t\thttps://www.buffalo.jp/support/faq/detail/16000.html","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d000011270f","text":"\t\t\tへーそれだけで同居できるもんなん...??と半信半疑で試してみたら BOOOM! 有線ルーターの端末一覧に無線の端末の情報も載るようになった、最高だぜ","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112710","text":"\tグラフがみれるのでフムフムしてるんだけど、単にルーター機能だけだったらシステム負荷はそんな大したことないらしい、プロセッサは4コアあるけどどれも数%だし、メモリもスカスカ、温度は40度ぐらい","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112711","text":"\t\tオーバーキルらしいことは事前に知ってたけど、なるほどなーと","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112712","text":"\t\t安定して使えるようだったら [ChromeOS] の端末(が転がってたので...)で動かしてるちょっとした家スクリプトを移したりしてもいいかもしれん","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112713","text":"\tまあとにかく安定して動作してほしいですハイ","created":1674552811,"updated":1674552811},{"id":"63cfa5eb4ade4d0000112714","text":"","created":1674552811,"updated":1674552811}]}