{"id":"5c4658f6decd5d0017b43cb1","title":"Storybook Driven Development を試している - dev.to/jgs","image":"https://gyazo.com/ce3e82ad4f91b690365627d71dce140b/raw","created":1518796782,"updated":1568356236,"lines":[{"id":"5c4658f64ade4d0000c49073","text":"Storybook Driven Development を試している - dev.to/jgs","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49074","text":"前々から気になっていた [Storybook] を試して、プロダクトでも採用してみたので所感を書く。","created":1518801275,"updated":1568356071},{"id":"5c4658f64ade4d0000c49075","text":"ちなみに、 [https://github.com/zeit/next.js Next.js] を使っているけれど、","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49076","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49077","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49078","text":"\t.babelrc","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49079","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4907a","text":"の設定とかをやっていれば","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4907b","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4907c","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4907d","text":"\tstart-storybook","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4907e","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4907f","text":"の","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49080","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49081","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49082","text":"\t-s ./","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49083","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49084","text":"オプションで問題なく動いた。","created":1518801275,"updated":1518801275},{"id":"5d7b36ec4ade4d00009eb424","text":"","created":1568356076,"updated":1568356076},{"id":"5c4658f64ade4d0000c49085","text":"[****** 動機]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49087","text":"ここ数年、React を使って component ベースでウェブページを設計することを何度かやってきているが、未だにパスタコンポーネントが出来上がってしまう。そしてパスタコンポーネント群は往々にして開発がつらくなっていく...。","created":1518801275,"updated":1518801275},{"id":"5d7b36ef4ade4d00009eb425","text":"","created":1568356079,"updated":1568356079},{"id":"5c4658f64ade4d0000c49088","text":"[****** Storybook について]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4908a","text":"[https://gyazo.com/ce3e82ad4f91b690365627d71dce140b]","created":1518801275,"updated":1568356100},{"id":"5c4658f64ade4d0000c4908b","text":"Storybook は動的にスタイルガイドを生成できるツールで、[React] だけではなく [Vue] や [Angular] にも対応しているよう。","created":1518801275,"updated":1568356110},{"id":"5c4658f64ade4d0000c4908c","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4908d","text":"\t@storybook/react","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4908e","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4908f","text":"をインストールして CLI から起動するだけでホットロードしてくれる画面が立ち上がって便利だった。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49090","text":"サンプルは [https://storybook.js.org/examples/ https://storybook.js.org/examples/] でみれる。","created":1518801275,"updated":1518801275},{"id":"5d7b37124ade4d00009eb426","text":"","created":1568356114,"updated":1568356114},{"id":"5c4658f64ade4d0000c49091","text":"[****** [アトミックデザイン]について]","created":1518801275,"updated":1568356119},{"id":"5c4658f64ade4d0000c49093","text":"[https://res.cloudinary.com/practicaldev/image/fetch/s--woA-tEty--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.gyazo.com/1e42493f2e45b243085bf9571b593212.png https://res.cloudinary.com/practicaldev/image/fetch/s--woA-tEty--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.gyazo.com/1e42493f2e45b243085bf9571b593212.png]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49094","text":"(これが全てだろう)","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49095","text":"[https://res.cloudinary.com/practicaldev/image/fetch/s--MeTT6R7Z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.gyazo.com/758f97c15a3e4721f5a4c020125d04e7.jpg https://res.cloudinary.com/practicaldev/image/fetch/s--MeTT6R7Z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.gyazo.com/758f97c15a3e4721f5a4c020125d04e7.jpg]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49096","text":"(有名な図)","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c49097","text":"Storybook を書いていくときにある程度項目立てをしていった方がいいだろう、と考えた。そこで思い出したのが [Atomic Design] だった。昔、知った時は分類がややこしそうだと思ったが、一旦従ってみることにした。","created":1518801275,"updated":1568356128},{"id":"5d7b371b4ade4d00009eb427","text":"","created":1568356124,"updated":1568356124},{"id":"5c4658f64ade4d0000c49098","text":"[****** 開発フロー]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4909a","text":"まずは小物から Atom として Storybook に書いていく。状態によって変化するコンポーネントは状態を列挙して、Storybook 上で確認できるようにしていく。まずは Atom と Molecules たちが仕上がってくる。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c4909b","text":"各パーツが仕上がったら API とつなぎ込む必要がある Organisms など、動きをつけていく。ここで役に立つのが recompose である。","created":1518801275,"updated":1518801275},{"id":"5d7b37274ade4d00009eb428","text":"","created":1568356135,"updated":1568356135},{"id":"5c4658f64ade4d0000c4909c","text":"[****** [recompose] について]","created":1518801275,"updated":1568356138},{"id":"5c4658f64ade4d0000c4909e","text":"[https://github.com/acdlite/recompose recompose] は Lodash ライクな React (特に [HoC])向けのユーティリティベルト。","created":1518801275,"updated":1568356142},{"id":"5d7b374a4ade4d00009eb42c","text":"","created":1568356171,"updated":1568356171},{"id":"5c4658f64ade4d0000c4909f","text":"code:_","created":1518801275,"updated":1568356167},{"id":"5c4658f64ade4d0000c490a0","text":"\t","created":1568356167,"updated":1568356167},{"id":"5c4658f64ade4d0000c490a1","text":"","created":1568356167,"updated":1568356167},{"id":"5c4658f64ade4d0000c490a2","text":"こんな感じで見た目を司るコンポーネントのみを切り出せるように様々な関数が用意されている。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490a3","text":"例えば React の Lifecycle 関数だと","created":1518801275,"updated":1518801275},{"id":"5d7b37364ade4d00009eb429","text":"","created":1568356150,"updated":1568356150},{"id":"5c4658f64ade4d0000c490a4","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490a5","text":"\t","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490a6","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490a7","text":"こんな感じで分離させることができる。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490a8","text":"また、これらは","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490a9","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490aa","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490ab","text":"\tcompose","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490ac","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490ad","text":"関数でこれらを組み合わせることもできる。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490ae","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490af","text":"\t","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b0","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b1","text":"ゆくゆくは [enzyme] を使って Storybook 上で挙動の確認などもできるとよいのだけど、一旦 Storybook ではスタイルガイドに徹することにして","created":1518801275,"updated":1568356183},{"id":"5c4658f64ade4d0000c490b2","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b3","text":"\t","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b4","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b5","text":"として、story では","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b6","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b7","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b8","text":"\timport {Counter} from '...'","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490b9","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490ba","text":"と読み込み、Pages からは","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490bb","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490bc","text":"code:_","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490bd","text":"\timport Counter from '...'","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490be","text":"","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490bf","text":"と読み込むことで見た目のみのコンポーネントと、動き込みのコンポーネントに分けることができた。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490c0","text":"見た目に関しては Storybook 上でパーフェクトに仕上がってるので、バチッと動くロジックを書けばうまいこと動くようになるので心地よかった。","created":1518801275,"updated":1518801275},{"id":"5d7b375b4ade4d00009eb42d","text":"","created":1568356188,"updated":1568356188},{"id":"5c4658f64ade4d0000c490c1","text":"[****** 今後の展望など]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490c3","text":"Storybook のドキュメントにも書いてある [visual regression test] をやってみたい。あとは、上にも少し書いた enzyme を使っての動きのテストなど。","created":1518801275,"updated":1568356195},{"id":"5d7b375e4ade4d00009eb42e","text":"","created":1568356190,"updated":1568356190},{"id":"5c4658f64ade4d0000c490c4","text":"[****** まとめ]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490c6","text":"Atomic Design に従ったコンポーネント群を Storybook を使って見た目を仕上げてから、recompose を使って動きを足していく開発フローを導入してみている。","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490c7","text":"余談だけど、ざざっと Examples を見たら Wix の wix-style-react はものすごい使いやすいようにカスタムされていてすごかった...。オフィシャルに取り込んでほしいレベル。","created":1518801275,"updated":1518801275},{"id":"5d7b37684ade4d00009eb42f","text":"","created":1568356200,"updated":1568356200},{"id":"5d7b378c4ade4d00009eb430","text":"#javascript","created":1568356236,"updated":1568356236},{"id":"5c4658f64ade4d0000c490c8","text":"[* original: https://dev.to/jgs/storybook-driven-development---37b7]","created":1518801275,"updated":1518801275},{"id":"5c4658f64ade4d0000c490c9","text":"#20180217 #0217","created":1518801275,"updated":1568356225},{"id":"5c4658f64ade4d0000c490ca","text":"","created":1518801275,"updated":1568356236}]}