{"id":"602542733b9522001cb4100e","title":"Scrapbox に戻ってきた","image":null,"created":1613054581,"updated":1613054585,"lines":[{"id":"602542733b9522001cb4100e","text":"Scrapbox に戻ってきた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f3c","text":"from [20210207] #0207","created":1613054581,"updated":1613054585},{"id":"602542744ade4d0000e17f3d","text":"Scrapbox に戻ってきた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f3e","text":"\t[Roam Research] をしばらく触ってたが、結局馴染まなかった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f3f","text":"\t\t一番キツかったのは[ブラケット]が二重なこと","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f40","text":"\t\t\t[markdown] が根本にあるからブラケットが二重だったりするんだろうなあ","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f41","text":"\t\tRoam を体験してみると、Scrapbox の 2-hop link のありがたみが染みた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f42","text":"\tとはいえ、収穫もあった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f43","text":"\t\t3カラム方式が便利だった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f44","text":"\t\t\t左サイドバーに Daily Notes へのリンク、任意のページへのリンクが追加できる","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f45","text":"\t\t\t右サイドバーは最初は使い方が謎だったんだけど、任意のページを表示できる","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f46","text":"\t\t\t\t表示だけではなく、編集もできるのでメインのカラムで書きながら別ページにコピペしたり、block への ref を貼ったり、割と便利","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f47","text":"\t\ttodo の管理","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f48","text":"\t\t\tcmd + Enter で todo が追加/完了がトグルできるのが意外と便利だった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f49","text":"\t\t\t\tもう [Todoist] じゃなくていいな、とおもったので Todoist を身辺整理してしまったぐらい","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f4a","text":"\t\tテンプレート","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f4b","text":"\t\t\t;; でテンプレートを挿入できるのが便利","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f4c","text":"\t\t\t\tScrapbox は new の時に挿入できるだけで、一度ページにしてしまうと基本コピペするしかないはず？","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f4d","text":"\t\t\t\t　もしくは popup menu?","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f4e","text":"\t\tBlock reference","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f4f","text":"\t\t　Scrapbox でも当該行をリンクすることができるけど、行の内容が出ないのがツラい","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f50","text":"\t\t\tBlock に対してファジー検索できるのは面白かった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f51","text":"\t\t\tリンクにしてない部分もサジェストしてくれるので、とりあえずリンクせずに書き付けておいて、後からガッと張るみたいなことできるけど、なんかその2段階方式があると逆にリンクが育たない感覚があった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f52","text":"\t\tcurrent time","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f53","text":"\t\t\t日記をつける時にラク","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f54","text":"\t\t\t\tこれは早速 Scrapbox にフォーマットを追加して、ctrl-t で優先的に時間が出るようにした","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f55","text":"\t\ttomorrow/today/yesterday","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f56","text":"\t\t\tこれも Daily Notes 周辺の参照にラク","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f57","text":"\t\tモバイルで両方のPWAを使ったが、Roamの方が出来がよく感じた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f58","text":"\t\t　起動すると Quick Capture というシンプル版がまず起動して、それを後から同期するという仕組み","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f59","text":"\t\t　　Scrapbox は、出先などでメモりたい時に起動が遅くてちょいストレス","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f5a","text":"\t\t　とはいえ、この QC は手動で同期しないもいけないのでダルい","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f5b","text":"\t\t　この時代にモバイルでノートテイクすることが減ってはいるが","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f5c","text":"\tつーわけで、Roam の体験をある程度維持しつつ、Scrapbox で生きていくにはどうするか、と考えた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f5d","text":"\t\t最初は[Webサービス]にして、iframe でがんばれるか...?とおもったが、Scrapbox がちゃんと iframe 対策していて無理だった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f5e","text":"\t\t\tモバイルのことも考えると何かと便利かなと...","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f5f","text":"\t\t\t\tElectron とか React Native あたりも考えたけど、あまり詳しくないのでやめた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f60","text":"\t\tとなると[Chrome拡張]だよなあ、というわけでまた Chrome Extension を書きはじめた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f61","text":"\t\t\t[Scboloo] にちょい手を入れてるのを含めると、スクボ関係の CE は4つめくらい...","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f62","text":"\t\tいい加減大統一拡張つくりたい気持ちはある","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f63","text":"\t3カラムはどうやって実現するかは迷い中","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f64","text":"\t\tCSS Grid でやりたい気はする","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f65","text":"\tとりあえず todo をなんとかできるか調べてみたが、Scrapbox でタスク管理している人でもたぶん [x] みたいなのを自分で書くか、ポップアップメニューから〜というやつっぽい","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f66","text":"\t\tポップアップメニューをプログラマブルに出して選択できればラクそうだけど、文字選択状態にならないと引っ張り出せなそう","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f67","text":"\t\tそれはめんどい","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f68","text":"\tグループウェアとしての Scrapbox の思想においては機械的な編集、変更を容易にさせないというのはすげーわかるのだが、こと独りジャーナルをやるには足枷になってしまう気がする","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f69","text":"\tとはいえ、入力はしていても、最終的にはプログラムが書き込んでるわけだからどっかで介入できるっしょ〜とおもったが、そういえば Scrapbox は [WebSocket] で通信しているんだった","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f6a","text":"\t\tws か〜となって以前諦めた記憶が蘇ってくる","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f6b","text":"\t\tが、WebSocket をインターセプトして送受信をジャックすればなりすませるんじゃね...?と思いつく","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f6c","text":"\t普段の仕事では絶対に書かないのだが、`const originalWs = window.WebSocket; originalWs.prototype.send = data => {...}` というようなコードを全てが始まる前に挿し込めばインターセプトできる(治安が悪い)","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f6d","text":"\t\tあとは Scrapbox の通信を眺めて、それらしい commit を send してやると変更することができた","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f6e","text":"\t\tハマりどころ","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f6f","text":"\t\t\tparentId","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f70","text":"\t\t\t\tたぶん HEAD の commitId のこと","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f71","text":"\t\t\t\tcommit するとサーバから commitId が返ってくるので、繰り返し編集する際にはこの値を保持しておく必要がある","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f72","text":"\t\t\t任意の commit を送ると、Scrapbox 側のステートと齟齬が出る","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f73","text":"\t\t\t\t恐らく入力されたものがローカルの状態を更新して、それを commit することでサーバとは同期しているんだとおもうが、こうなってると機械的に送った commit が開いてるページでは反映されなくなってしまう","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f74","text":"\t\t\t\tさすがに WebSocket をインターセプトできても、レスポンスを偽装することはできなそうだったので、別で iframe を開いておいて iframe で commit すると開いてるページでは他のセッションが更新した情報が WebSocket から流れてきて、更新が反映される","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f75","text":"\t\t\t\t　(微妙な実装)","created":1613054581,"updated":1613054581},{"id":"602542744ade4d0000e17f76","text":"\t\t\t\t前述の commitId も親 frame 側の更新でも更新されてしまうので、親 frame で commitId を受け取ったら iframe 側に伝播させておく必要があった","created":1613054581,"updated":1613054581}]}