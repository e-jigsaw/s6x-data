{"id":"5c3c04e3be23a10017086e9b","title":"npm run-scripts から watch する - dev.jgs.me","image":null,"created":1448290800,"updated":1557830374,"lines":[{"id":"5c3c04e34ade4d0000c9ecfb","text":"npm run-scripts から watch する - dev.jgs.me","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ecfc","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ecfd","text":"先日 `npm-run-all` を使って[ビルドスクリプト]などを `npm run-script` に寄せるようにしたが([http://dev.jgs.me/2015/10/28/alpine-linux.html http://dev.jgs.me/2015/10/28/alpine-linux.html])これに `gulp.watch` 的な機構を載せようという試み。","created":1448290800,"updated":1550580273},{"id":"5c3c04e34ade4d0000c9ecfe","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ecff","text":"これまでは若干面倒ながらも [Atom] で `cmd+b` でもってビルドをしていたのだけれど、さすがに面倒になってきたので watch して自動でビルドするように変更した。`npm-run-all` が [glob] のインターフェイスを持っているので、できれば glob のインターフェイスで watch するファイルを指定してコマンドを走らせたい。探してみたところ、`chokidar-cli` というパッケージを使えばあっさりだった。","created":1448290800,"updated":1550580282},{"id":"5c3c04e34ade4d0000c9ed00","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed01","text":"code: (js)","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed02","text":" \"scripts\": {","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed03","text":"   \"watch\": \"npm-run-all -p watch:*\",","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed04","text":"   \"watch:ls\": \"chokidar '**/*.ls' -c 'npm run build:bundle'\",","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed05","text":"   \"watch:jade\": \"chokidar '**/*.jade' -c 'npm run build:jade'\"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed06","text":" }","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed07","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed08","text":"というような感じで指定してやると `npm run watch` で監視が走るようになる。これに","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed09","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed0a","text":"code: (js)","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed0b","text":" \"scripts\": {","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed0c","text":"   \"dev\": \"npm-run-all clean build -p watch serve\",","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed0d","text":"   \"serve\": \"static -p $npm_package_config_PORT $npm_package_config_DEST\"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed0e","text":" }","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed0f","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed10","text":"`node-static` でサーブするようにしていれば `npm run dev` でサーブと監視を開始することができる。便利。あとは Atom か Notification center あたりにビルド完了を notify したいなあ〜。","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed11","text":"","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed12","text":"[* original: http://dev.jgs.me/2015/11/24/watch-by-npm-run-scripts]","created":1448290800,"updated":1448290800},{"id":"5c3c04e34ade4d0000c9ed13","text":"#20151124 #1124","created":1448290800,"updated":1557830374},{"id":"5c6bfa464ade4d00004c9937","text":"","created":1550580294,"updated":1550580294}]}