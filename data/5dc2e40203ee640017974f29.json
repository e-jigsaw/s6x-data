{"id":"5dc2e40203ee640017974f29","title":"emoji selector - yutarobox","image":null,"created":1573053446,"updated":1573143290,"lines":[{"id":"5dc2e40203ee640017974f29","text":"emoji selector - yutarobox","created":1573053446,"updated":1573053446},{"id":"5dc2e4034ade4d0000c6a7b6","text":"[emoji selector - yutarobox https://scrapbox.io/yutaro/emoji_selector]","created":1573053446,"updated":1573053446},{"id":"5dc2e42b4ade4d0000b5dda4","text":"","created":1573053484,"updated":1573053484},{"id":"5dc2e4034ade4d0000c6a7b7","text":"code:script.js","created":1573053446,"updated":1573053467},{"id":"5dc2e41c4ade4d0000b5dc29","text":"  const Asearch = (function() {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc2a","text":"      var INITPAT, INITSTATE, MAXCHAR;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc2b","text":"      INITPAT = 0x80000000; ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc2c","text":"      MAXCHAR = 0x100; ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc2d","text":"      INITSTATE = [INITPAT, 0, 0, 0];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc2e","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc2f","text":"      Asearch.prototype.isupper = function(c) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc30","text":"        return (c >= 0x41) && (c <= 0x5a);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc31","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc32","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc33","text":"      Asearch.prototype.islower = function(c) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc34","text":"        return (c >= 0x61) && (c <= 0x7a);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc35","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc36","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc37","text":"      Asearch.prototype.tolower = function(c) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc38","text":"        if (this.isupper(c)) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc39","text":"          return c + 0x20;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc3a","text":"        } else {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc3b","text":"          return c;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc3c","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc3d","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc3e","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc3f","text":"      Asearch.prototype.toupper = function(c) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc40","text":"        if (this.islower(c)) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc41","text":"          return c - 0x20;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc42","text":"        } else {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc43","text":"          return c;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc44","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc45","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc46","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc47","text":"      function Asearch(source) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc48","text":"        var c, i, j, len, mask, ref, ref1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc49","text":"        this.source = source;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc4a","text":"        this.shiftpat = [];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc4b","text":"        this.epsilon = 0;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc4c","text":"        this.acceptpat = 0;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc4d","text":"        mask = INITPAT;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc4e","text":"        for (c = i = 0, ref = MAXCHAR; 0 <= ref ? i < ref : i > ref; c = 0 <= ref ? ++i : --i) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc4f","text":"          this.shiftpat[c] = 0;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc50","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc51","text":"        ref1 = this.unpack(this.source);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc52","text":"        for (j = 0, len = ref1.length; j < len; j++) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc53","text":"          c = ref1[j];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc54","text":"          if (c === 0x20) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc55","text":"            this.epsilon |= mask;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc56","text":"          } else {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc57","text":"            this.shiftpat[c] |= mask;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc58","text":"            this.shiftpat[this.toupper(c)] |= mask;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc59","text":"            this.shiftpat[this.tolower(c)] |= mask;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc5a","text":"            mask >>>= 1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc5b","text":"          }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc5c","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc5d","text":"        this.acceptpat = mask;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc5e","text":"        return this;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc5f","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc60","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc61","text":"      Asearch.prototype.state = function(state, str) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc62","text":"        var c, i, i0, i1, i2, i3, len, mask, ref;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc63","text":"        if (state == null) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc64","text":"          state = INITSTATE;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc65","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc66","text":"        if (str == null) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc67","text":"          str = '';","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc68","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc69","text":"        i0 = state[0];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc6a","text":"        i1 = state[1];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc6b","text":"        i2 = state[2];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc6c","text":"        i3 = state[3];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc6d","text":"        ref = this.unpack(str);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc6e","text":"        for (i = 0, len = ref.length; i < len; i++) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc6f","text":"          c = ref[i];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc70","text":"          mask = this.shiftpat[c];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc71","text":"          i3 = (i3 & this.epsilon) | ((i3 & mask) >>> 1) | (i2 >>> 1) | i2;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc72","text":"          i2 = (i2 & this.epsilon) | ((i2 & mask) >>> 1) | (i1 >>> 1) | i1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc73","text":"          i1 = (i1 & this.epsilon) | ((i1 & mask) >>> 1) | (i0 >>> 1) | i0;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc74","text":"          i0 = (i0 & this.epsilon) | ((i0 & mask) >>> 1);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc75","text":"          i1 |= i0 >>> 1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc76","text":"          i2 |= i1 >>> 1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc77","text":"          i3 |= i2 >>> 1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc78","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc79","text":"        return [i0, i1, i2, i3];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc7a","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc7b","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc7c","text":"      Asearch.prototype.match = function(str, ambig) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc7d","text":"        var s;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc7e","text":"        if (ambig == null) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc7f","text":"          ambig = 0;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc80","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc81","text":"        s = this.state(INITSTATE, str);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc82","text":"        if (!(ambig < INITSTATE.length)) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc83","text":"          ambig = INITSTATE.length - 1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc84","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc85","text":"        return (s[ambig] & this.acceptpat) !== 0;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc86","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc87","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc88","text":"      Asearch.prototype.unpack = function(str) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc89","text":"        var bytes, c, code, i, len, ref;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc8a","text":"        bytes = [];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc8b","text":"        ref = str.split('');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc8c","text":"        for (i = 0, len = ref.length; i < len; i++) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc8d","text":"          c = ref[i];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc8e","text":"          code = c.charCodeAt(0);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc8f","text":"          if (code > 0xFF) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc90","text":"            bytes.push((code & 0xFF00) >>> 8);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc91","text":"          }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc92","text":"          bytes.push(code & 0xFF);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc93","text":"        }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc94","text":"        return bytes;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc95","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc96","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc97","text":"      return Asearch;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc98","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc99","text":"    })();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc9a","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc9b","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc9c","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc9d","text":"  const projectName = scrapbox.Project.name;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc9e","text":"  let emojis = [];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dc9f","text":"  const box = $('<div>').addClass('form-group').css(\"position\", \"absolute\");","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca0","text":"  const container = $('<div>').addClass('dropdown');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca1","text":"  box.append(container);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca2","text":"  let items = $('<ul>').addClass('dropdown-menu');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca3","text":"  container.append(items);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca4","text":"  $('#editor').append(box);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca5","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca6","text":"  fetch(`/api/pages/${projectName}?limit=10000`, { credentials: 'same-origin'})","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca7","text":"  \t.then( res => res.text())","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca8","text":"      .then( text => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dca9","text":"      \tconst data = JSON.parse( text );","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcaa","text":"       \tconst pages = data.pages;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcab","text":"        \tpages.filter( page => (page.image !== null && page.title.match(/^[\\w\\s\\-\\+]+$/)))","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcac","text":"       \t\t.forEach( page => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcad","text":"         \t\t\temojis.push({","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcae","text":"         \t\t\t\tname: page.title,","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcaf","text":"             \t\t\tpath: page.title,","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb0","text":"            \t\t\ticon: `/api/pages/${projectName}/${page.title}/icon`,","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb1","text":"              \t})","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb2","text":"               })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb3","text":"      })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb4","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb5","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb6","text":"  scrapbox.PageMenu.addMenu({","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb7","text":"      title: 'emoji',","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb8","text":"      image: 'https://gyazo.com/d57fea8a143650375af1c8bba1fc1370/raw'","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcb9","text":"  })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcba","text":"  scrapbox.PageMenu('emoji').addItem({","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcbb","text":"      title: \"load emojis from /jgsemj\",","created":1573053469,"updated":1573143278},{"id":"5dc2e41c4ade4d0000b5dcbc","text":"      onClick: () => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcbd","text":"      \t fetch('/api/pages/jgsemj?limit=10000')","created":1573053469,"updated":1573143208},{"id":"5dc2e41c4ade4d0000b5dcbe","text":"        \t.then( res => res.text())","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcbf","text":"         \t.then( text => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc0","text":"          \tconst data = JSON.parse( text );","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc1","text":"            \tconst pages = data.pages;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc2","text":"             \tpages.filter( page => (page.image !== null && page.title.match(/^[\\w\\s\\-\\+]+$/)))","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc3","text":"              \t\t.forEach( page => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc4","text":"                \t\t\tfor( let emoji of emojis ) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc5","text":"                            if( emoji.name === page.title )return;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc6","text":"                      \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc7","text":"                \t\t\temojis.push({","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc8","text":"                  \t\t\tname: page.title,","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcc9","text":"                     \t\t\tpath: '/jgsemj/' + page.title,","created":1573053469,"updated":1573143286},{"id":"5dc2e41c4ade4d0000b5dcca","text":"                       \t\ticon: `/api/pages/jgsemj/${page.title}/icon`,","created":1573053469,"updated":1573143290},{"id":"5dc2e41c4ade4d0000b5dccb","text":"                  \t\t})","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dccc","text":"                \t\t})","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dccd","text":"             })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcce","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dccf","text":"  })      \t\t","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd0","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd1","text":"   // TODO: 様々な文字列が来る場合を考慮する","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd2","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd3","text":"   const taberareloo = ( word, list ) => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd4","text":"   \tconst targetWord = word.replace(':', '');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd5","text":"   \tconst regStr = targetWord.split('').reduce( (pre, cur) => pre + cur + '.*' ).replace('+', '\\\\+');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd6","text":"    \tconst reg = RegExp(regStr,'i');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd7","text":"     \treturn list.filter( item => item.name.match(reg));","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd8","text":"   }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcd9","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcda","text":"   const asearched = ( word, list ) => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcdb","text":"   \tconst targetWord = word.replace(':', '');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcdc","text":"    \tconst a = new Asearch( targetWord );","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcdd","text":"      const limitCount = Math.floor( targetWord.length/ 4 ) + 1;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcde","text":"      let result = [];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcdf","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce0","text":"      for(let i = 0; i <= limitCount; i++){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce1","text":"      \tlet matched = list.filter( item => a.match( item.name, i));","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce2","text":"       \tlet notExisted = matched.filter( item => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce3","text":"        \t\tfor( let r of result){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce4","text":"          \t\tif(r.name === item.name){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce5","text":"            \t\t\treturn false;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce6","text":"            \t\t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce7","text":"          \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce8","text":"           \treturn true;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dce9","text":"        \t})","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcea","text":"         \tresult = [ ...result, ...notExisted];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dceb","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcec","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dced","text":"     \treturn result;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcee","text":"   }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcef","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf0","text":"   const fizzSearch = ( word, list ) => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf1","text":"   \tconst a = asearched( word, list );","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf2","text":"    \tconst b = taberareloo( word, list );","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf3","text":"     \tconst c = b.filter( item => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf4","text":"      \tfor( let r of a ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf5","text":"       \t\tif( r.name == item.name){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf6","text":"         \t\t\treturn false;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf7","text":"         \t\t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf8","text":"       \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcf9","text":"        \treturn true;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcfa","text":"      })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcfb","text":"     \treturn [...a, ...c];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcfc","text":"   }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcfd","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcfe","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dcff","text":"   let stack = \"\";","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd00","text":"   const editor = $('#editor');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd01","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd02","text":"   const open  = () => container.addClass(\"open\"); ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd03","text":"   const close = () => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd04","text":"   \tstack = \"\";","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd05","text":"   \tcontainer.removeClass(\"open\");","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd06","text":"   }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd07","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd08","text":"   const replaceText = (text, cursor, emojiPath) => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd09","text":"   \tcursor.focus();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd0a","text":"      setTimeout(()=>{","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd0b","text":"      \tfor(let i = 0; i < text.length; i++){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd0c","text":"          \tvar ke1 = document.createEvent(\"Events\");","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd0d","text":"           \tke1.initEvent(\"keydown\", true, true);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd0e","text":"           \tke1.keyCode = ke1.which = 8; // Backspace","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd0f","text":"           \tcursor.dispatchEvent(ke1);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd10","text":"          }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd11","text":"          document.execCommand('insertText',null, `[${emojiPath}.icon]` );","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd12","text":"          close();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd13","text":"      }, 50)","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd14","text":"   }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd15","text":"   ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd16","text":"   editor.keydown( e => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd17","text":"   \tconst key = e.key;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd18","text":"    \tif(key === undefined ) return;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd19","text":"   \tif( stack === \"\" && key !== \":\"){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd1a","text":"    \t\tclose();\t","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd1b","text":"    \t\treturn","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd1c","text":"      };","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd1d","text":"  ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd1e","text":"      if ($('.cursor-line').text().trim() == 'code:'","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd1f","text":"         \t\t|| $('.cursor-line .code-block').length == 1) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd20","text":"         close()","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd21","text":"         return;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd22","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd23","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd24","text":"      if( key === ':' && stack.length !== 0){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd25","text":"      \tlet name = stack.replace(':', '');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd26","text":"      \tfor(let emoji of emojis){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd27","text":"       \t\tif( emoji.name === name ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd28","text":"         \t\t\tlet cursor = $('#text-input')[0];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd29","text":"         \t\t\treplaceText(stack + \":\", cursor, emoji.path);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd2a","text":"            \t\treturn;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd2b","text":"         \t\t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd2c","text":"       \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd2d","text":"        \tclose()","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd2e","text":"         \treturn;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd2f","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd30","text":"  \tconst cursor = $('#text-input')[0];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd31","text":"      if( key.match(/^[\\w\\s\\-\\:\\+]$/) ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd32","text":"      \tstack += e.key;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd33","text":"       \tlet focused = $(':focus');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd34","text":"        \tif(focused.is(items.find('li > a'))){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd35","text":"       \t\tcursor.focus();  \t\t","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd36","text":"         \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd37","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd38","text":"    ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd39","text":"      if( stack.length === 2 ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd3a","text":"      \tif( key === \" \" ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd3b","text":"       \t\tstack = \"\";","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd3c","text":"         \t\treturn;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd3d","text":"       \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd3e","text":"      \topen();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd3f","text":"       }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd40","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd41","text":"      switch(key){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd42","text":"      \tcase 'Backspace':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd43","text":"       \t\tstack = stack.slice(0, stack.length - 1);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd44","text":"         \t\tif(stack.length === 0){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd45","text":"           \t\tclose();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd46","text":"             \t\treturn;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd47","text":"           \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd48","text":"         \t\tbreak;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd49","text":"          case 'ArrowUp':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd4a","text":"          \tlet focusedUp = $(':focus');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd4b","text":"           \tif( focusedUp.is(items.find('li > a').eq(0)) ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd4c","text":"            \t\te.stopPropagation();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd4d","text":"              \tcursor.focus();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd4e","text":"            \t}else if( !focusedUp.is(items.find('li > a')) ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd4f","text":"             \t\tclose();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd50","text":"               \treturn;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd51","text":"              }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd52","text":"           \tbreak;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd53","text":"          case 'ArrowDown':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd54","text":"          \tlet focusedDown = $(':focus');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd55","text":"          \tif( !focusedDown.is(items.find('li > a'))) {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd56","text":"          \t\te.stopPropagation();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd57","text":"            \t\te.preventDefault();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd58","text":"           \t\titems.find(\"li > a\").eq(0).focus();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd59","text":"              }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd5a","text":"              break;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd5b","text":"          case 'Escape':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd5c","text":"          case 'ArrowLeft':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd5d","text":"          case 'ArrowRight': ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd5e","text":"          case 'Home':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd5f","text":"          case 'End':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd60","text":"          case 'PageUp':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd61","text":"          case 'PageDown':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd62","text":"           \tclose();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd63","text":"            \tbreak;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd64","text":"          ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd65","text":"          case 'Enter':","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd66","text":"          \tif( stack.length === 1 ){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd67","text":"           \t\tclose();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd68","text":"             \t\tbreak;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd69","text":"           \t}","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd6a","text":"            \tlet focused = $(':focus');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd6b","text":"            \tif(!focused.is(items.find('li > a'))){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd6c","text":"             \t\te.stopPropagation();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd6d","text":"                  e.preventDefault();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd6e","text":"            \t\titems.find('li > a').eq(0).click();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd6f","text":"              }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd70","text":"            break;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd71","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd72","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd73","text":"      if( stack.length <= 1 || !key.match(/^[\\w\\s\\:\\-\\+]$|Backspace/)) return;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd74","text":"      const matchedEmoji = fizzSearch(stack, emojis)","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd75","text":"      if( matchedEmoji.length === 0){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd76","text":"      \tclose();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd77","text":"       \treturn;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd78","text":"      }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd79","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd7a","text":"      const newItems = $('<ul>').addClass('dropdown-menu');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd7b","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd7c","text":"      matchedEmoji.forEach( ( emoji, index) => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd7d","text":"        if( index > 30 ) return;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd7e","text":"        const li = $('<li>').addClass('dropdown-item');","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd7f","text":"        const a  = $('<a>').attr(\"tabindex\", \"0\");","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd80","text":"        const img = $('<img>').attr(\"src\", emoji.icon)","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd81","text":"           .addClass(\"icon\").css({ height: \"17px\", float: \"left\"});","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd82","text":"        const nameTag = $('<div>').text(\"  :\" + emoji.name + \":\");","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd83","text":"        a.append(img);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd84","text":"        a.append(nameTag);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd85","text":"        li.append(a);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd86","text":"        newItems.append(li);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd87","text":"  \t","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd88","text":"        a.on('click', () => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd89","text":"         \tcursor.focus();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd8a","text":"          replaceText(stack, cursor, emoji.path);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd8b","text":"        })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd8c","text":"        ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd8d","text":"        a.on('keypress', ev => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd8e","text":"        \t if(ev.key === \"Enter\"){","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd8f","text":"          \tev.preventDefault();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd90","text":"           \tev.stopPropagation();","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd91","text":"           \treplaceText(stack, cursor, emoji.path);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd92","text":"           }","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd93","text":"        })","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd94","text":"  \t})","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd95","text":"   \t","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd96","text":"    \titems.replaceWith(newItems);","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd97","text":"    \titems = newItems;","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd98","text":"      let css = {};","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd99","text":"     \tcursor.style.cssText.split(';').filter( text => text !== '' )","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd9a","text":"      \t.forEach( text => {","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd9b","text":"       \t\tconst props = text.split(':').map( text => text.replace(' ', '').replace('px', ''));","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd9c","text":"         \t\tcss[props[0]] = props[1];","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd9d","text":"      \t});","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd9e","text":"      ","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dd9f","text":"    \tbox.css({","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dda0","text":"     \t\ttop: `${parseInt(css.top) + parseInt(css.height) + 3}px`,","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dda1","text":"       \tleft: `${css.left}px`,","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dda2","text":"     \t});","created":1573053469,"updated":1573053469},{"id":"5dc2e41c4ade4d0000b5dda3","text":"   })","created":1573053469,"updated":1573053469},{"id":"5dc2e4034ade4d0000c6a7b8","text":"","created":1573053446,"updated":1573053446},{"id":"5dc2e4034ade4d0000c6a7b9","text":"#UserScript #絵文字","created":1573053446,"updated":1573053499},{"id":"5dc2e4034ade4d0000c6a7ba","text":"#20191107 #1107","created":1573053446,"updated":1573053446},{"id":"5dc2e4034ade4d0000c6a7bb","text":"","created":1573053446,"updated":1573053446}]}