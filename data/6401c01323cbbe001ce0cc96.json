{"id":"6401c01323cbbe001ce0cc96","title":"ASRock Z790 + 13th Core i3 に Proxmox をインストール","image":null,"created":1677836308,"updated":1677836313,"lines":[{"id":"6401c01323cbbe001ce0cc96","text":"ASRock Z790 + 13th Core i3 に Proxmox をインストール","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011dde4","text":"from [20230301] #0301","created":1677836308,"updated":1677836313},{"id":"6401c0134ade4d000011dde5","text":"[ASRock] [Z790] + 13th [Core i3] に [Proxmox] をインストール","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011dde6","text":"\t[Herobox] に Proxmox をインストールしたのに味をしめて、もうちょいイイマシンにもいれてみるか、ということで適当にパーツを選定した","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011dde7","text":"\t一応新しめのやつにしとこうかなあって感じで ASRock の Z790 チップセットのマザボに13世代の i3 をのっける構成にした","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011dde8","text":"\t\t[NAS] を見越して [HDD] がいっぱい挿さるやつがいいかなあ、とおもって [SATA] のポートが多いやつを探していったら ASRock のこのマザボだと8発ついてたので採用した","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011dde9","text":"\tメモリは安かった [Samsung] の16GBにした","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddea","text":"\t\t一旦1本挿しで、あと3枚挿せるので今後必要になったら足す","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddeb","text":"\t[M.2] は [ADATA] の安いやつ1TBにした","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddec","text":"\t\t[SSD] 少なめでいいかな〜ともおもったが、そもそも SSD が4発挿さるので HDD にする前に M.2 を挿せるだけ挿すのもアリかなと","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011dded","text":"\t電源は [COUGAR] の750Wにした","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddee","text":"\t\tこれも安いやつでいいかなと考えてたが、プラグインがいいのと、SATA 8発供給できるケーブルがついてるのが良かった","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddef","text":"\tケースは [Fractal Design] の [Define 7]","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf0","text":"\t\tこれもストレージがたくさん入る構成にできるとのことだったので","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf1","text":"\tパチパチ組んで、いざ USB 挿して起動したら思いの外ハマってしまった","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf2","text":"\t\t最初の画面は出てくるんだけど、`Populating /dev...` みたいなとこでフリーズしてしまう","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf3","text":"\t\tエラーをたどっていくと、framebuffer のエラーがでてて、[X11] が VGA のバスをつかめねえみたいな状態っぽかった","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf4","text":"\t\tスプラッシュスクリーンみたいな画面で `e` を押すと起動オプションを設定できて、`linux` の項目で `nomodeset` をつけて起動するとシェルの状態で起動して、X11 の設定をいじって再起動みたいなことができる","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf5","text":"\t\t\ttty1, tty2, tty3 は ctrl + alt + F1/2/3 みたいな感じで切り替えられた","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf6","text":"\t\t...んだけど、全然良化しない","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf7","text":"\t\tで、なんかさらに調べていくと i915 のドライバがどうこうみたいな話がでてきて、そのあたりも少し試したんだけど、そもそもなんで OS をインストールしたいだけなのに X11 が必要なんだーーとおもったら、[Debian] がインストールされていたら [apt] で Proxmox をインストールできるらしい","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf8","text":"\t\t\tいやじゃあそれでいいじゃん.....","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddf9","text":"\t\tというわけで Debian のUSBメモリをつくったらサクッと Debian はインストールできた","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddfa","text":"\t\thttps://pve.proxmox.com/wiki/Install_Proxmox_VE_on_Debian_11_Bullseye","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddfb","text":"\t\tここに手順がまとまってるので、この通りにやればいいんだけど、冒頭の hosts を書き換えるのをすっ飛ばしてしまい、後にハマる原因をつくってしまったりした","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddfc","text":"\t\t`/etc/apt/sources.list` に proxmox のサーバを追加して、update して `pve-kernel-5.19` をインストールする","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddfd","text":"\t\t\tこれも、最初、書いてあるまんま `pve-kernel-5.15` をインストールしたら起動しなくなって焦った","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddfe","text":"\t\t\tgrub で元のやつで起動して、5.19 にインストールし直したらうまくいった","created":1677836308,"updated":1677836308},{"id":"6401c0134ade4d000011ddff","text":"","created":1677836308,"updated":1677836308}]}