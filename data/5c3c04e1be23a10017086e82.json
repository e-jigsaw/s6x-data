{"id":"5c3c04e1be23a10017086e82","title":"emo の React 実装をつくった - dev.jgs.me","image":null,"created":1423407600,"updated":1581259830,"lines":[{"id":"5c3c04e14ade4d0000c9e2a2","text":"emo の React 実装をつくった - dev.jgs.me","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2a4","text":"[http://e-jigsaw.github.io/emo-react/ http://e-jigsaw.github.io/emo-react/]","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2a5","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2a6","text":"[Riotjs] でつくった [emo] っていう絵文字検索システムを [React] で再実装してみた。ちょっと前に [react-patterns https://github.com/planningcenter/react-patterns] っていうドキュメントを見つけて、「オレが求めていたのはコレだったんだ...!」という気持ちになったので。","created":1423407600,"updated":1556772016},{"id":"5c3c04e14ade4d0000c9e2a7","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2a8","text":"オリジナルの方で絵文字のデータまわりの準備はできていたので、ajax でデータをとってきて実装するだけでよかった。コードは [https://github.com/e-jigsaw/emo-react https://github.com/e-jigsaw/emo-react] に。Riotjs 版の方では [Fuse] というファジー検索ツールを使ってみていたんだけど、精度がイマイチというか、思ったような結果が出にくいなあとおもったので適当に [Immutable.js] の List に検索する文字の組をコンマ区切りにしてぶっこんで正規表現の `search` で検索するようにしたら体感早くなったし良かった。ちなみに得られた知見として正規表現でユーザの入力した文字列を検索する際には[正規表現のメタ文字]をエスケープする必要があった。","created":1423407600,"updated":1556772042},{"id":"5c3c04e14ade4d0000c9e2a9","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2aa","text":"code: (coffee)","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2ab","text":" r = new RegExp @state.keyword.replace /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&'","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2ac","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2ad","text":"デフォルトでなんかできるのかとおもったけど、意外と泥臭く書く必要があった。","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2ae","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2af","text":"さて、React なんですがだいぶどういう風に書いていけばいいのかも分かってきたし、先述の react-patterns の後光もあって結構よいなと思ってきた。ここ数日「やっぱ [Elm] じゃね！？」ってなってたけど、いざ自分のほしいものを作ろうとしたときにまだスッと手が動かないので難しい。具体的にいうと、[Ajax] でデータをとってくるところで大いに消耗した(公式にいまいちパッとしたドキュメントがない & サンプルの [Flickr] アプリが壊れてる)のでうーむ。あと、調べていくにつれて Elm でも DOM のあれこれを書くサンプルがちょいちょい出てきて、結局そこ書かなアカンのかい！となったのもある。","created":1423407600,"updated":1556772060},{"id":"5c3c04e14ade4d0000c9e2b0","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2b1","text":"この絵文字検索、通信もあるしそれなりにインタラクションも多いので題材としてちょうどいい(し、アセットも既に揃っている)と感じてきたので次は [Mithril] あたりで書いてみたい。","created":1423407600,"updated":1556772066},{"id":"5c3c04e14ade4d0000c9e2b2","text":"","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2b3","text":"[* original: http://dev.jgs.me/2015/02/09/emo-impremented-by-react]","created":1423407600,"updated":1423407600},{"id":"5c3c04e14ade4d0000c9e2b4","text":"#20150209 #0209","created":1423407600,"updated":1556772074},{"id":"5cca74e54ade4d000061386c","text":"","created":1556772069,"updated":1556772069}]}