{"id":"63f7041a39f3c2001b843f5b","title":"Herobox に Proxmox をインストールする","image":"https://gyazo.com/af350f1b4d16bcbf3fd84fe99a105789/raw","created":1677132827,"updated":1677132831,"lines":[{"id":"63f7041a39f3c2001b843f5b","text":"Herobox に Proxmox をインストールする","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91f6","text":"from [20230222] #0222","created":1677132827,"updated":1677132831},{"id":"63f7041b4ade4d00008c91f7","text":"[Herobox] に [Proxmox] をインストールする","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91f8","text":"\tルーターとして使っている [NanoPi R5S] に [docker] をいれて、いくつかコンテナを立ち上げてたら `docker: Error response from daemon: no space left on device.` ってエラーが出てコンテナを起動できなくなってしまった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91f9","text":"\t`docker system df` をみてみると `RECLAIMABLE` が0になっていた","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91fa","text":"\t\tよくよく考えてみると、このマシンはメモリ2GBのストレージ8GBの極限(まあHDDが256MB?ぐらいの時代に比べたら贅沢なものだが)環境なのであった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91fb","text":"\t\tなんかたまに fs? でつっかえるなとおもったこともあったんだけど、そりゃメモリ2GBじゃそうか〜と","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91fc","text":"\t\t一応 [M.2] の口があるみたいなのでストレージは増設できそうだけど、それにしてもメモリが限界すぎる","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91fd","text":"\t[Tailscale] のお陰ですっかり [selfhosted] 沼に足を踏み入れつつあり、Proxmox という沼沢地を発見してしまった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91fe","text":"\t自宅にいろいろマシンは転がってるんだけど、常時起動しとくことも考えるとなるべく省電力なマシンの方がいいよなーという気持ちがあり、最初は [M2] の [Mac mini] をクラスタリングできないかなーとおもったんだけどまあ [Apple silicon] がむずそうなのは容易に想像できるのでやめた","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c91ff","text":"\t\t[Raspberry Pi] は全然在庫が観測できなくて無理そうってなった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9200","text":"\t\t\tラズパイ用に [Pimox] ってやつがあって、それでクラスタリングできるみたい","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9201","text":"\t\t一瞬ファンレスCPUのケースとか、ファンレスCPUクーラーとかに意識を奪われたんだけど、値段をみて冷静になった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9202","text":"\t\tで、たどり着いたのが[ミニPC]というジャンルで、[DeskMini] とか前から知ってたけど [NUC] もそこそこ値段するし、そういう話なら素直にパーツポチポチしてそれなりのスペックのマシン組むのが手っ取り早いのかなーとも考えた","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9203","text":"\t\t\t今回購入した Herobox は Celeron N5100 という CPU を積んでて、スペック的には6世代のi3ぐらいのものらしい(省電力ではあるみたい)","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9204","text":"\t\t\t\tよくわからんけどまあ2万切る値段で、万が一全然使えないスペックだったとしても Proxmox ってやつならクラスタリングできるらしいじゃーん？ということで検証用に買った","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9205","text":"\t\t[AMD] の [CPU] 何度も検討してきたけど、なんだかんだで [linux] で壁にぶち当たった時に自力で乗り越えられる気がしないので結局 [Intel] にしてしまう","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9206","text":"\t[https://gyazo.com/af350f1b4d16bcbf3fd84fe99a105789]","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9207","text":"\t適当に安いやつ買ったんだけど、[Windows11 Home] も入って2万はスゲーとおもう...","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9208","text":"\t\tどうせ Proxmox いれてぶっとばしちゃうので OS いらんかったんだけど、まあ使うこともあるかなーと...","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9209","text":"\t\t\t現代の Windows の認証方式がまるでよくわかってなくて、[MS] のアカウントでログインしたらそのままライセンスの認証も通って普通に使える感じだった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c920a","text":"\t[USBメモリ]を引っ張り出してきて、Proxmox VE 7 の ISO イメージをダウンロードして、[mac] で [Balena Etcher] という [GUI] の焼きツールで焼いた","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c920b","text":"\t[CHUWI] の [BIOS] の入り方が全然わからなくて、調べたところに依るとロゴが表示されるところで ESC を押すだけで入れるそうなんだが.....イマイチ勘所がわからなくて何回か Windows の起動とシャットダウンを繰り返してたら、Windows の復旧モードに入ったので、チャンスとおもって [UEFI] に入れた","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c920c","text":"\t\tUSBからブートして、Proxmox VE をインストールした","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c920d","text":"\t\t\tマウス挿すの面倒すぎてキーボードだけでトライしたが、Tab だけでどうにかなった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c920e","text":"\t`/etc/apt/sources.list` に `deb http://download.proxmox.com/debian/pve bullseye pve-no-subscription` を追加して、`/etc/apt/sources.list.d/pve-enterprise.list` のエンプラ向けリポジトリをコメントアウトしておく","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c920f","text":"\t\t`apt-get update && apt-get -y upgrade && apt-get -y dist-upgrad` でいろいろ最新にしておく","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9210","text":"\tこれでブラウザで <ip>:8006 にアクセスすると Web の GUI が出るそうなんだが、レスポンスが返ってこなくてあれ〜とおもってたら `https://<ip>:8006` でアクセスしないとダメだった","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9211","text":"\t\tコンソールにも `https` って書いてあったわ....","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9212","text":"\t\tオレオレ証明書にブラウザが怒ってくるのでLEあたりでマトモな証明書で返るようにしたいなー(課題)","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9213","text":"\tとりあえず起動するとこまではいけたので満足","created":1677132827,"updated":1677132827},{"id":"63f7041b4ade4d00008c9214","text":"","created":1677132827,"updated":1677132827}]}