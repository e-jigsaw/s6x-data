{"id":"63e53f4e398d32001bf489c2","title":"NanoPi R5S を docker のホストにする","image":null,"created":1675968335,"updated":1675968339,"lines":[{"id":"63e53f4e398d32001bf489c2","text":"NanoPi R5S を docker のホストにする","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0672f","text":"from [20230204] #0204","created":1675968335,"updated":1675968339},{"id":"63e53f4f4ade4d0000e06730","text":"[NanoPi R5S] を [docker] のホストにする","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06731","text":"\tcode:sh","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06732","text":"\t $ opkg install docker","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06733","text":"\t $ opkg install dockerd","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06734","text":"\t $ /etc/init.d/dockerd start","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06735","text":"\tとりあえず Docker いれとけばそこそこクリーンに環境つくれるやろう、ということで","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06736","text":"\tよくわからんけど `dockerd restart` しないと socket につながらんぽい感じだった","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06737","text":"\t`opkg install docker-compose` で docker compose もいれておく","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06738","text":"\tn度めの [homebridge] を docker 上にインストールした","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06739","text":"\t\tnet=host とかでうまく動くのかなあ、とちょっと心配だったけど割と素直に動いた","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0673a","text":"\tplugin なんかいれよーとおもって、最近 [Switchbot] のオートメーションをトライしてたので調べてみたら公式で homebridge の plugin を公開してくれているという太っ腹ぶり","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0673b","text":"\t\tで、さらに調べてみると [BLE] でセンサやボットと接続できるらしくて、期待としては homebridge => hub mini => bot とか sensor => hub mini => home みたいな hub mini が hub になって BLE で通信してくれるーを期待してたけど、[bluetooth] 積んでるデバイスで homebridge が動いてたら BLE で通信できるよ〜ん的な話っぽかった","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0673c","text":"\t\t残念ながら NanoPi は bluetooth は積んでなさそう...","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0673d","text":"\t\tUSB のスロットは空いてるので [M5StickC]とかを挿したらイイ感じに BLE で通信できたりすんのかなあ...?","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0673e","text":"\t\t\tSwitchbot 自体は BLE で通信してみた系の記事は結構あるのでいけそうげではある","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e0673f","text":"\t家の[エアコン]は[ダイキン]なので、何度か試みているダイキンとの通信をまたやってみるかあとn回めのトライをして、そういえば `/skyfi...` 等々の API 叩く式のやつは先人たちのコードがあるんだけど、そういえば `/dsiot/multireq` に複雑そうな json を渡す方式だったんだったわ....とゲンナリした","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06740","text":"\t\t一応 [python] の実装はみつけたんだけど、python 熟練度もひくくてよーわからん https://github.com/lltcggie/py-dsapi","created":1675968335,"updated":1675968335},{"id":"63e53f4f4ade4d0000e06741","text":"","created":1675968335,"updated":1675968335}]}