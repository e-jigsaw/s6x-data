{"id":"63ef1bfd0b64ab001c683c37","title":"Tailscale の DNS で https を使う","image":null,"created":1676614653,"updated":1676614658,"lines":[{"id":"63ef1bfd0b64ab001c683c37","text":"Tailscale の DNS で https を使う","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad1","text":"from [20230216] #0216","created":1676614653,"updated":1676614658},{"id":"63ef1bfc4ade4d0000906ad2","text":"[Tailscale] の [DNS] で [https] を使う","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad3","text":" まだ beta らしいが","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad4","text":" 普段何気なく [localhost] で開発してるわけだが、tailscale ごしにアクセスすると localhost ではなくなってしまうので、いかに localhost が特権的な名前なのかをまざまざと知らされる","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad5","text":" tailscale の DNS には [LE] の証明書のなんやかんやを肩代わりしてくれる仕組みがあって、これを試してみる","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad6","text":" 元々 machine.tsnnnnnn.ts.net 的な感じでも各マシンにアクセスできるが、数字は覚えられないのでひとまずそれっぽい名前におきかえておく","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad7","text":" それから https をWebのUIで有効にすると、cli で `tailscale cert machine...` 打つだけで crt と key を入手できる","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad8","text":" \t[mac] では `/Applications/Tailscale.app/Contents/MacOS/Tailscale cert`","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ad9","text":" あとはこの認証情報でもってサーバをたてればよい","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ada","text":" 今回は [astro] で検証していて、astro.config に [vite] の設定をそのまま渡せるフィールドがあるので、そいつに渡してやればよい","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906adb","text":" macにそんな感じで https を受け付けられるようにしておいて、[iOS]でIP直打ちでなくURLでアクセスすると https でアクセスできた","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906adc","text":"  これで無用な制限がなくウェブアプリを開発できるようになった","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906add","text":" [StackBlitz] の [WebContainer] が API 公開してて、Service Worker as Server として開発する方向もアツいかなとおもってたけど([開発環境のポータビリティ]として)、こんだけ簡単にローカルの環境につながるなら適当なタブレットを VPN つないで [VSC] をサーバで接続するなり [VNC] で接続するなりでもよさそうとおもった","created":1676614653,"updated":1676614653},{"id":"63ef1bfc4ade4d0000906ade","text":"","created":1676614653,"updated":1676614653}]}